make a custom minimal static site generator so i have full control over everything:

mysite/
├─ content/
│  ├─ index.md
│  ├─ resume.md
│  ├─ blog.md
│  ├─ posts/
│  │  ├─ foo.md
│  │  ├─ bar.md
├─ templates/
│  ├─ index.html
│  ├─ blog.html
│  ├─ post.html
│  ├─ resume.html
├─ images/
│  └─ test.png
├─ css/
│  ├─ style.css
│  └─ highlight.css
├─ js/
│  └─ highlight.js
├─ output/
└─ build.py

i need a markdown->html converter that takes code blocks like: 

```foobar

and converts is to:

<pre><code class="language-foobar">

mirrors content/ recursively:

content/index.md -> 
output/index.html
content/posts/foo.md -> 
output/posts/foo.html

tools i will use:
- highlight.js
- markdown-it

example of a template:

template example:

<html>
    <head>
        <link rel="stylesheet" href="../css/style.css">
        <link rel="stylesheet" href="../css/highlight.css">
        <script src="../js/highlight.js"></script>
        <script>hljs.highlightAll();</script>
    </head>
    <body>
        {{ content }}
    </body>
</html>